How to deploy a multi-server openmediakit transcoder instance

1. Deploy the OMKT in a standard server. Let's say /var/www/ is your document root. and 10.2.1.41 is our server's private ip address.

2. share /var/www/ using NFS typically, this gives in /etc/exports : 

/var/www/  10.2.1.0/255.255.255.0(rw,async,no_subtree_check,no_root_squash)

in our case, all secondary omkt instances will be on 10.2.0.X network.

3. deploy a standard Debian Wheezy machine. Give it a unique hostname (eg: if your main omkt instance is named "omkt", you can name it "omkt2", but NOT "omkt" too.)

4. add the deb-multimedia.org repository, example :

echo "deb http://debian.octopuce.fr/debian-multimedia wheezy main non-free"  >/etc/apt/sources.list.d/multimedia.list
apt-get update
apt-get install deb-multimedia-keyring

5. install the required packages : 

apt-get install nfs-client php5-cli php5-mysql ffmpeg

6. mount the /var/www of the main omkt into the secondary one : 

mkdir /var/www
echo "10.2.1.41:/var/www /var/www  nfs  auto,rsize=8192,wsize=8192,vers=3	0	0" >>/etc/fstab
mount /var/www

(you may need to allow communication between the hosts in your firewall)

7. ensure that your OMKT MAIN instance has a REMOTE MySQL configuration. If your mysql is LOCAL, 
   make it listen into the network and allow connections from all the IP addresses of your OMKT-s instances

8. launch the metadata daemon and transcode daemon in your omkt-2 machine

as of now we are using php script in a screen like this :
screen
cd /var/www/modules/api/scripts ; php metadatadaemon.php 
cd /var/www/modules/api/scripts ; php transcoderdaemon.php

